<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Mlt Drinks</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input, select, button { display: block; margin-bottom: 10px; width: 300px; }
    h2 { margin-top: 40px; }
    label { font-weight: bold; }
  </style>
</head>
<body>
  <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî Mlt Drinks</h1>

  <h2>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
  <form id="product-form">
    <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
    <input type="text" id="name" required />

    <label>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ:</label>
    <input type="text" id="image_url" />

    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
    <input type="text" id="category" required />

    <label>–û–±—ä—ë–º (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.5–ª):</label>
    <input type="text" id="volume" />

    <label>–¶–µ–Ω–∞ (‚ÇΩ):</label>
    <input type="number" id="price" required />

    <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑:</label>
    <input type="number" id="min_order" value="1" />

    <label>–í –Ω–∞–ª–∏—á–∏–∏:</label>
    <select id="in_stock">
      <option value="1" selected>–î–∞</option>
      <option value="0">–ù–µ—Ç</option>
    </select>

    <label>–•–∏—Ç –ø—Ä–æ–¥–∞–∂:</label>
    <select id="is_top">
      <option value="1">–î–∞</option>
      <option value="0" selected>–ù–µ—Ç</option>
    </select>

    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
  </form>

  <h2>üìû –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ ¬´–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª</h2>
  <form id="contact-form">
    <label>–°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (tel: –∏–ª–∏ https://t.me/...):</label>
    <input type="text" id="contact_action" placeholder="tel:+79891791163" />
    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </form>

  <script>
    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    document.getElementById('product-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        name: document.getElementById('name').value,
        image_url: document.getElementById('image_url').value,
        category: document.getElementById('category').value,
        price: parseFloat(document.getElementById('price').value),
        volume: document.getElementById('volume').value,
        in_stock: parseInt(document.getElementById('in_stock').value),
        min_order: parseInt(document.getElementById('min_order').value),
        is_top: parseInt(document.getElementById('is_top').value)
      };

      const res = await fetch('/add-product', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      alert(result.success ? '–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω!' : '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏');
    });

    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–Ω–æ–ø–∫–∏ —Å–≤—è–∑–∏
    document.getElementById('contact-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const action = document.getElementById('contact_action').value;
      const res = await fetch('/manager-action', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action })
      });
      const result = await res.json();
      alert(result.success ? '–û–±–Ω–æ–≤–ª–µ–Ω–æ!' : '–û—à–∏–±–∫–∞');
    });

    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
    fetch('/manager-action')
      .then(res => res.json())
      .then(data => {
        document.getElementById('contact_action').value = data.action;
      });
  </script>
</body>
</html>
